https://AnthonyRawlinsUoM:FuelMoisture2017@e4ftl01.cr.usgs.gov/MOLT/MOD09GA.006/YYYY.MM.DD/MOD09GA.A2017329.h29v06.006.*.hdf
https://AnthonyRawlinsUoM:FuelMoisture2017@e4ftl01.cr.usgs.gov/MOLT/MOD09GA.006/YYYY.MM.DD/MOD09GA.A2017329.h29v06.006.*.hdf.xml

# eg., https://e4ftl01.cr.usgs.gov/MOLT/MOD09GA.006/2017.11.25/MOD09GA.A2017329.h29v06.006.2017331025503.hdf


Command Line Access
Some users utilize scripting and command line tools to access data.   These tools will be affected by requiring a login to Earthdata login to download data.
Two common command line tools are curl and wget.  These tools each have different command line arguments and parameters that will need to be passed to them to work with Earthdata login when accessing the LP DAAC Data Pool.
Curl
For accessing LP DAAC Data pool via the curl command, the following flags need to be added:
-L/--location      Follow Location: hints 
The –L flag follows any redirects sent by the Data Pool or by Earthdata login. 
-c/--cookie-jar <file> Write cookies to this file after operation 
Since Earthdata login uses cookies to store its tokens curl must provide a location to save them at.
-b/--cookie <name=string/file> Cookie string or file to read cookies from 
This parameter is needed to read cookies as well.  After Earthdata login provides the token, the Data Pool will utilize it from the cookie.  
The cookie location for the –c and –b options should match or the command will not work.
After adding these options the user has a choice of how to pass their credentials in to EarthData login to access the Data Pool.
To type in your user name and password interactively input:
-u/--user <user[:password]> Set server user and password
Note, if you specify your password on the command line it may be seen by someone who can access the current process list or your command history.  If you do not specify your password you will be prompted to type it in and it will not be echoed to the screen.
For users running unattended scripts and commands there is an option that can be set that will allow the command to run successfully:
-n/--netrc         Must read .netrc for user name and password
This option requires the user to create a file named .netrc which is a hidden file located in their home directory.  



The .netrc file has the following format:
machine urs.earthdata.nasa.gov
        login username
        password userpassword
This file will allow the curl command to run non-interactively.  Permission on the .netrc file must be rw-------.

Examples of curl commands:
curl -n -L -c cookiefile -b cookiefile http://e4ftl01.cr.usgs.gov/MOLT/MOD09A1.006/2001.01.09/MOD09A1.A2001009.h13v01.006.2015140120258.hdf.xml 
This command does not require user input (it reads the .netrc file) and outputs to stdout:
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE GranuleMetaDataFile SYSTEM "http://ecsinfo.gsfc.nasa.gov/ECSInfo/ecsmetadata/dtds/DPL/ECS/ScienceGranuleMetadata.dtd">
<GranuleMetaDataFile>
    <DTDVersion>1.0</DTDVersion>
    <DataCenterId>EDC</DataCenterId>
    <GranuleURMetaData>
        <GranuleUR>SC:MOD09A1.006:2331505</GranuleUR>
        <DbID>2331505</DbID>
        <InsertTime>2015-08-13 10:39:59.813</InsertTime>
        <LastUpdate>2015-08-13 10:39:59.813</LastUpdate>
        <CollectionMetaData>
            <ShortName>MOD09A1</ShortName>
            <VersionID>6</VersionID>
        </CollectionMetaData>
        <DataFiles>
	.
	.
	.


curl -u username -L -c cookiefile -b cookiefile http://e4ftl01.cr.usgs.gov/MOLT/MOD09A1.006/2001.01.09/MOD09A1.A2001009.h13v01.006.2015140120258.hdf --output MOD09A1.A2001009.h13v01.006.2015140120258.hdf
This command requests the user (username) input their password and then downloads the hdf file indicated and stores it in the output file MOD09A1.A2001009.h13v01.006.2015140120258.hdf
This command:
curl -u username:password -L -c cookiefile -b cookiefile http://e4ftl01.cr.usgs.gov/MOLT/MOD09A1.006/2001.01.09/MOD09A1.A2001009.h13v01.006.2015140120258.hdf --output MOD09A1.A2001009.h13v01.006.2015140120258.hdf
Works without asking the user for their password but is risky because the password is seen on the command line.
Note: following commands using the same cookie file will use the valid token to download without re-authenticating.  Tokens are valid for 2 weeks.
So this call would work immediately following the previous one.  This would also work following a call using in the –n parameter.
curl -L -c cookiefile -b cookiefile http://e4ftl01.cr.usgs.gov/MOLT/MOD09A1.006/2001.01.09/MOD09A1.A2001009.h18v01.006.2015140120235.hdf --output MOD09A1.A2001009.h18v01.006.2015140120235.hdf
Scripts can use this same mechanism as well.  See the example below:
#!/bin/bash

product="MOD09A1"
version=5
lat=44.3
lon=99.7
date="2015-01-01,2015-03-31"

# Use inventory service to select files
for URL in `curl https://lpdaacsvc.cr.usgs.gov/services/inventory?product=$product\&version=$version\
&lat=$lat\&lon=$lon\&date=$date\&output=text 2> /dev/null`
do
        # Cut granules file name from URL, it's the last item in the URL
        FILE=`echo $URL | rev | cut -d\/ -f 1 | rev `
        echo "Getting file $FILE "
        # retrieve the file from data pool
        # curl $URL --output $FILE 2>/dev/null # old style call
        curl -n -L -c ~/.cookies -b ~/.cookies $URL --output $FILE 2>/dev/null  #new style call
done

WGET

Wget is another command line function that can be used to download data from the data pool.  Users of wget will need to make changes in how they make the call to handle authentication.
Flags needed to make authenticated access work for wget are:
  -L,  --relative                  follow relative links only.
The –L flag follows any redirects sent by the Data Pool or by Earthdata login. 
    --user=USER               set both ftp and http user to USER.
The --user flag allows the specification of the user’s EarthData Login user name.  If --user flag is used one of the following flags will also be necessary.
--ask-password            prompt for passwords.
This prompts the user to type in a password.  The password is not echoed to the screen.
 --password=PASS           set both ftp and http password to PASS.
This argument uses the specified value as the password.  Note, if you specify your password on the command line it may be seen by someone who can access the current process list or your command history.  If you do not specify your password you will be prompted to type it in and it will not be echoed to the screen.
Note:  if the user has a .netrc file wget will use that directly and neither the --user or any of the password arguments will be needed.
The .netrc file has the following format:
machine urs.earthdata.nasa.gov
        login username
        password userpassword
This file will allow the curl command to run non-interactively.  Permission on the .netrc file must be rw-------.
Cookies are also still required for using wget from the command line.  The flags for cookies are:
    --load-cookies=FILE     load cookies from FILE before session.
Loads cookies from the specified file.  The Cookie file will contain the Earthdata login token.
    --save-cookies=FILE     save cookies to FILE after session.
Saves cookies to the specified file.  This will enable the token to be used later.
Wget by default writes the output to a file with the same name as the file from the URL.  To specify a different file name use the -O argument.
  -O,  --output-document=FILE    write documents to FILE.
Examples of wget commands:
wget -L --user=user --ask-password --load-cookies ~/.cookies --save-cookies ~/.cookies http://e4ftl01.cr.usgs.gov/MOLT/MOD09A1.006/2001.01.09/MOD09A1.A2001009.h13v01.006.2015140120258.hdf
This command gets and saves the file MOD09A1.A2001009.h13v01.006.2015140120258.hdf after the user enters the correct password.

wget -L --user=user --password=password --load-cookies ~/.cookies --save-cookies ~/.cookies http://e4ftl01.cr.usgs.gov/MOLT/MOD09A1.006/2001.01.09/MOD09A1.A2001009.h13v01.006.2015140120258.hdf
This command gets and saves the file MOD09A1.A2001009.h13v01.006.2015140120258.hdf using the specified password.  Note:  the password is visible on the command line.
If a .netrc file is available in the users home directory this command will download the file without any user interaction. 
wget -L --load-cookies ~/.cookies --save-cookies ~/.cookies http://e4ftl01.cr.usgs.gov/MOLT/MOD09A1.006/2001.01.09/MOD09A1.A2001009.h13v01.006.2015140120258.hdf
Using these flags wget can be utilized in scripts as well.
